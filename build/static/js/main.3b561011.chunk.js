(this["webpackJsonpdocument-verifier"]=this["webpackJsonpdocument-verifier"]||[]).push([[0],{183:function(e,t,n){"use strict";(function(e){var a=n(25),r=n(3),i=n(4),c=n(7),o=n(6),s=n(1),d=n.n(s),l=n(5),u=(n(313),n(314),n(193)),f=n(10),b=f.verify,m=f.isValid,p=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).myRef=void 0,a.state={document_integrity:!1,document_status:!1,issuer_identity:!1},a.myRef=d.a.createRef(),a}return Object(i.a)(n,[{key:"verify_document",value:function(){var e=this;b(JSON.parse(this.props.certificate_contents),{network:"ropsten"}).then((function(t){e.setState({document_integrity:m(t,["DOCUMENT_INTEGRITY"]),document_status:m(t,["DOCUMENT_STATUS"]),issuer_identity:m(t,["ISSUER_IDENTITY"])})}))}},{key:"componentDidMount",value:function(){null!=this.props.certificate_contents&&this.verify_document()}},{key:"render",value:function(){var e=this,t="DocumentIntegrity-Header",n="DocumentIntegrity-Header-Invalid";return null==this.props.certificate_contents?t+=" hide":n+=" hide",d.a.createElement("div",{className:"DocumentIntegrity"},d.a.createElement("header",{className:t},d.a.createElement("div",{className:"StatusContainer"},this.state.document_integrity?d.a.createElement("i",{className:"fa fa-check-circle"}," Not tampered with"):d.a.createElement("i",{className:"fa fa-times-circle"}," Not tampered with"),this.state.document_status?d.a.createElement("i",{className:"fa fa-check-circle"}," Has been issued"):d.a.createElement("i",{className:"fa fa-times-circle"}," Has been issued"),this.state.issuer_identity?d.a.createElement("i",{className:"fa fa-check-circle"}," Issuer identified"):d.a.createElement("i",{className:"fa fa-times-circle"}," Issuer identified"),d.a.createElement("button",{onClick:function(t){e.props.certificate_resetter()}},"Verify another document"))),d.a.createElement("header",{className:n},d.a.createElement("p",null,"Please upload a valid JSON certificate.")))}}]),n}(d.a.Component);p.init=!0;var g=function(t){Object(c.a)(a,t);var n=Object(o.a)(a);function a(e){var t;return Object(r.a)(this,a),(t=n.call(this,e)).fileUploaderInput=null,t.dragEventCounter=0,t.dragenterListener=function(e){t.overrideEventDefaults(e),t.dragEventCounter++,(e.dataTransfer.items&&e.dataTransfer.items[0]||e.dataTransfer.types&&"Files"===e.dataTransfer.types[0])&&t.setState({dragging:!0})},t.dragleaveListener=function(e){t.overrideEventDefaults(e),t.dragEventCounter--,0===t.dragEventCounter&&t.setState({dragging:!1})},t.dropListener=function(e){t.overrideEventDefaults(e),t.dragEventCounter=0,t.setState({dragging:!1}),"application/json"===e.dataTransfer.files[0].type&&e.dataTransfer.files&&e.dataTransfer.files[0]&&(t.setState({certificate:e.dataTransfer.files[0]}),t.readFileContents(e.dataTransfer.files[0],(function(){null!==t.state.certificate_contents&&null!==t.state.certificate&&(t.handleFileContents(t.state.certificate_contents),t.props.fileBubbler(t.state.certificate))})))},t.overrideEventDefaults=function(e){e.preventDefault(),e.stopPropagation()},t.onSelectFileClick=function(){t.fileUploaderInput&&t.fileUploaderInput.click()},t.onFileChanged=function(e){e.target.files&&e.target.files[0]&&t.setState({certificate:e.target.files[0]})},t.state={dragging:!1,certificate:null,certificate_contents:null},t}return Object(i.a)(a,[{key:"readFileContents",value:function(t,n){var a=this,r=new FileReader;r.onload=function(t){var r=t.target.result.replace(new RegExp("data:.*/.*,"),"");a.setState({certificate_contents:new e(r,"base64").toString("ascii")}),n()},r.readAsDataURL(t)}},{key:"handleFileContents",value:function(e){try{JSON.parse(e);this.props.contentBubbler(this.state.certificate_contents)}catch(t){console.log("ERROR : JSON couldn't be parsed.")}}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("dragover",(function(t){e.overrideEventDefaults(t)})),window.addEventListener("drop",(function(t){e.overrideEventDefaults(t)}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragover",this.overrideEventDefaults),window.removeEventListener("drop",this.overrideEventDefaults)}},{key:"render",value:function(){return d.a.createElement(v,{dragging:this.state.dragging,onDrag:this.overrideEventDefaults,onDragStart:this.overrideEventDefaults,onDragEnd:this.overrideEventDefaults,onDragOver:this.overrideEventDefaults,onDragEnter:this.dragenterListener,onDragLeave:this.dragleaveListener,onDrop:this.dropListener})}}]),a}(d.a.Component);g.counter=0;var v=function(e){var t=e.dragging,n=e.onDrag,a=e.onDragStart,r=e.onDragEnd,i=e.onDragOver,c=e.onDragEnter,o=e.onDragLeave,s=e.onDrop,l="file-uploader";return t&&(l+=" file-uploader--dragging"),d.a.createElement("div",{className:l,onDrag:n,onDragStart:a,onDragEnd:r,onDragOver:i,onDragEnter:c,onDragLeave:o,onDrop:s},d.a.createElement("div",{className:"file-uploader__contents"},d.a.createElement("span",null,"Drop your file here.")))};t.a=function(){var e=Object(s.useState)(null),t=Object(a.a)(e,2),r=t[0],i=t[1],c=Object(s.useState)(n(471)),o=Object(a.a)(c,2),f=o[0],b=o[1],m=Object(s.useState)(!1),v=Object(a.a)(m,2),h=v[0],E=v[1],O=Object(s.useRef)(!0);return Object(s.useEffect)((function(){O.current?O.current=!1:null!==r&&E(!0)}),[r,f]),d.a.createElement("div",{className:"App"},d.a.createElement("header",{className:"General-container Header-container"},d.a.createElement("div",{className:"General-container "+(h?"Hidden-container":"")},d.a.createElement(g,{fileBubbler:function(e){i(e)},contentBubbler:function(e){b(e)}})),d.a.createElement("div",{className:"General-container "+(h?"test-flex":"Hidden-container")},h?d.a.createElement(d.a.Fragment,null,d.a.createElement(u.a,{document:{name:"Current File",document:Object(l.getData)(JSON.parse(f))}}),d.a.createElement(p,{certificate_contents:f,certificate_resetter:function(){E(!1),i(null),b("")}})):d.a.createElement("div",null))))}}).call(this,n(14).Buffer)},193:function(e,t,n){"use strict";var a=n(19),r=n(25),i=n(11),c=n(73);function o(){var e=Object(a.a)(["\n              border: 1px solid #e2e8f0;\n              border-top: none;\n              padding: 2rem;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n            "]);return o=function(){return e},e}function s(){var e=Object(a.a)(["\n                display: flex;\n                border-bottom: 1px solid #e2e8f0;\n                list-style: none;\n                margin: 0;\n                padding: 0;\n                li {\n                  margin-right: 0.25rem;\n                }\n                li.selected {\n                  margin-bottom: -1px;\n                }\n                a {\n                  text-decoration: none;\n                  padding-left: 1rem;\n                  padding-right: 1rem;\n                  padding-top: 0.5rem;\n                  padding-bottom: 0.5rem;\n                  font-weight: 600;\n                  display: inline-block;\n                  background-color: white;\n                  border-style: solid;\n                  border-color: #e2e8f0;\n                }\n                li.selected a {\n                  color: #222;\n                  border-bottom: none;\n                  border-left-width: 1px;\n                  border-right-width: 1px;\n                  border-top-width: 1px;\n                  border-top-left-radius: 0.25rem;\n                  border-top-right-radius: 0.25rem;\n                }\n\n                li a {\n                  color: #4299e1;\n                  border-width: 0px;\n                }\n              "]);return s=function(){return e},e}function d(){var e=Object(a.a)(["\n              text-align: center;\n              flex-grow: 1;\n              align-self: center;\n              cursor: pointer;\n            "]);return d=function(){return e},e}function l(){var e=Object(a.a)(["\n              text-align: center;\n              font-weight: bold;\n            "]);return l=function(){return e},e}function u(){var e=Object(a.a)(["\n        width: 300px;\n        min-width: 300px;\n        max-width: 300px;\n        padding: 0.5rem;\n\n        .document {\n            cursor: pointer;\n            padding: 0.5rem;\n            background-color: #ebf8ff;\n            border-top: 4px solid #4299e2;\n            margin-bottom: 0.5rem;\n            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n        }\n        .document.active {\n            border-top-color: #38b2ac;\n            background-color: #e6fffa;\n        }\n    "]);return u=function(){return e},e}function f(){var e=Object(a.a)(["\n        display: flex;\n    "]);return f=function(){return e},e}function b(){var e=Object(a.a)(["\n    "]);return b=function(){return e},e}var m={TemplatesContainer:c.a.div(b()),FrameContainer:c.a.div(f()),DocumentsContainer:c.a.div(u())},p={firstStyle:Object(i.b)(l()),secondStyle:Object(i.b)(d()),thirdStyle:Object(i.b)(s()),fourthStyle:Object(i.b)(o())},g=n(1),v=n(474);function h(){var e=Object(a.a)(["\n                max-width: 1120px;\n                border: 0;\n                width: 100%;\n                height: ","px;\n                padding: 1rem;\n                padding-top: 0.5rem;\n              "]);return h=function(){return e},e}function E(){var e=Object(a.a)(["\n            width: 90%;\n            display: ",";\n          "]);return E=function(){return e},e}function O(){var e=Object(a.a)(["\n            width: 80%;\n          "]);return O=function(){return e},e}t.a=function(e){var t=e.document,n=Object(g.useState)(),a=Object(r.a)(n,2),c=a[0],o=a[1],s=Object(g.useState)(50),d=Object(r.a)(s,2),l=d[0],u=d[1],f=Object(g.useState)([]),b=Object(r.a)(f,2),j=b[0],y=b[1],D=Object(g.useState)(),w=Object(r.a)(D,2),S=(w[0],w[1]),N=Object(g.useState)(""),x=Object(r.a)(N,2),C=x[0],_=x[1],T=Object(g.useCallback)((function(e){o((function(){return e}))}),[]);return window.renderDocument=function(e){c&&e&&c({type:"RENDER_DOCUMENT",payload:{document:e}})},Object(g.useEffect)((function(){null!=t&&null!==t&&S(t)}),[]),Object(g.useEffect)((function(){null!=t&&c&&t&&c({type:"RENDER_DOCUMENT",payload:{document:t.document}})}),[c,t]),Object(g.useEffect)((function(){null!=t&&c&&C&&c({type:"SELECT_TEMPLATE",payload:C})}),[C,c]),Object(i.c)("div",{css:Object(i.b)(O())},Object(i.c)(m.FrameContainer,null,Object(i.c)("div",{css:Object(i.b)(E(),t?"block":"none")},Object(i.c)(m.TemplatesContainer,null,Object(i.c)("ul",{css:p.thirdStyle},j.map((function(e){return Object(i.c)("li",{key:e.id,className:"tab ".concat(C===e.id?"selected":""),onClick:function(){_(e.id)}},Object(i.c)("a",{href:"#"},e.label))})))),Object(i.c)("div",{css:p.fourthStyle},Object(i.c)(v.a,{source:"https://www.renderer.mza.jp",dispatch:function(e){"UPDATE_HEIGHT"===e.type&&u(e.payload),"UPDATE_TEMPLATES"===e.type&&(y(e.payload),_(e.payload[0].id))},onConnected:T,css:Object(i.b)(h(),l)})))))}},194:function(e,t,n){e.exports=n(472)},199:function(e,t,n){},313:function(e,t,n){},366:function(e,t){},367:function(e,t){},445:function(e,t){},446:function(e,t){},471:function(e){e.exports=JSON.parse('{"version":"https://schema.openattestation.com/2.0/schema.json","data":{"$template":{"name":"645a507e-d1f6-44b7-ace5-f2143a530789:string:COC","type":"22601356-d27f-4b05-acf2-9a1ee383d879:string:EMBEDDED_RENDERER","url":"4b93193e-c2b4-42ff-8e8b-097f12989749:string:https://www.renderer.mza.jp"},"recipient":{"name":"a915176e-9550-411c-97fa-1ec7a31377e4:string:Peter Kim","address":{"street":"ea337ecd-07f0-48e0-ae1c-54b47f3d9fa4:string:Kolenlaan 30A","zipCode":"e4bc1266-35e7-4804-a2b7-d31b9d203bae:string:3029ED","country":"c0384c50-6841-420e-bf74-3b40400681db:string:The Netherlands"}},"vatNumber":"64f807c3-76a1-48bc-a44e-10414985f368:string:9283827369RD","companyA":"6e2a7b0b-8e05-4b8d-b135-21814339087d:string:BlockLab","companyB":"beed65d5-a6a6-4152-905c-192bf943ae58:string:Appeldijk","issuers":[{"name":"d64cee36-1013-46a2-bf6c-2d2d362fa860:string:MZA Issuer","documentStore":"fe5a37cb-286e-4051-9e66-1217fd73572a:string:0xA92c7C46813aB9a7440CEcc5e0F10B7bB87Fee15","identityProof":{"type":"2691b86d-83d1-4116-bd53-bc94360005ac:string:DNS-TXT","location":"1993e5f7-3f16-4f90-b111-250dfc82c5f3:string:issuer.mza.jp"}}]},"signature":{"type":"SHA3MerkleProof","targetHash":"466d282cfc43f9ad93d61702f9c5c97b8d18cb95a2cfeb69ed992d690ce63dca","proof":[],"merkleRoot":"466d282cfc43f9ad93d61702f9c5c97b8d18cb95a2cfeb69ed992d690ce63dca"}}')},472:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(182),c=n.n(i),o=(n(199),n(183));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[194,1,2]]]);
//# sourceMappingURL=main.3b561011.chunk.js.map